# AWS移行後の予想コスト試算

## 1. 前提条件

### 1.1 利用状況の想定
- 月間アクティブユーザー: 100人
- 1日あたりの平均アクセス: 300回
- 画像アップロード: 1ユーザーあたり月10枚（平均1MB）
- チャット利用: 1ユーザーあたり月20回
- データベース容量: 初期10GB

### 1.2 AWS Free Tier利用可能なサービス
- Amazon RDS: 月750時間
- Amazon S3: 12ヶ月間5GBまで無料
- CloudFront: 12ヶ月間50GBまで無料
- Lambda: 月100万リクエストまで無料
- API Gateway: 12ヶ月間100万リクエストまで無料

## 2. サービス別コスト試算（月額）

### 2.1 コンピューティング
1. AWS Amplify
   - ビルド時間: 月20回 × 5分 = 100分
   - ホスティング: 5GB
   - 予想コスト: ¥1,000

2. Lambda
   - リクエスト数: 30,000回/月
   - 平均実行時間: 1秒
   - メモリ: 128MB
   - 予想コスト: Free Tier内（超過時 ¥500）

### 2.2 ストレージ
1. Amazon RDS (PostgreSQL)
   - db.t3.micro: ¥3,000
   - ストレージ(10GB): ¥1,000
   - バックアップ: 無料
   - 合計: ¥4,000

2. Amazon S3
   - ストレージ(5GB): Free Tier内
   - データ転送: Free Tier内
   - 予想コスト: Free Tier内（超過時 ¥500）

3. ElastiCache
   - cache.t3.micro: ¥2,500
   - 予想コスト: ¥2,500

### 2.3 ネットワーキング
1. CloudFront
   - データ転送: 50GB/月
   - リクエスト数: 30,000
   - 予想コスト: Free Tier内（超過時 ¥1,000）

2. API Gateway
   - リクエスト数: 30,000/月
   - 予想コスト: Free Tier内（超過時 ¥1,000）

### 2.4 その他
1. Amazon Cognito
   - MAU 100人
   - 予想コスト: 無料（50,000MAUまで）

2. Route 53
   - ホストゾーン: ¥500
   - 予想コスト: ¥500

## 3. 合計コスト試算

### 3.1 最小構成（Free Tier最大活用）
```
初期12ヶ月
- 必須固定費: ¥8,000/月
  - Amplify: ¥1,000
  - RDS: ¥4,000
  - ElastiCache: ¥2,500
  - Route 53: ¥500
- 変動費: ¥0（Free Tier内）
合計: ¥8,000/月
```

### 3.2 Free Tier終了後
```
13ヶ月目以降
- 固定費: ¥8,000/月
- 変動費: ¥3,000/月
  - S3: ¥500
  - CloudFront: ¥1,000
  - API Gateway: ¥1,000
  - Lambda: ¥500
合計: ¥11,000/月
```

## 4. コスト最適化のポイント

### 4.1 短期的な対策
1. Free Tierの最大活用
   - 12ヶ月間の無料枠を効率的に使用
   - 使用量の監視と制限設定

2. サービスの選択
   - 必要最小限のインスタンスタイプ選択
   - Auto Scalingの適切な設定

### 4.2 中長期的な対策
1. リザーブドインスタンス
   - RDSの1年または3年の予約で30-60%コスト削減
   - 利用パターンが安定した後に検討

2. キャッシュ戦略
   - ElastiCacheの効率的な利用
   - CloudFrontのキャッシュ設定最適化

3. モニタリングと最適化
   - AWS Cost Explorerによる継続的な分析
   - 未使用リソースの特定と削除

## 5. 注意点

1. コストの変動要因
   - ユーザー数の増加
   - データ転送量の増加
   - ストレージ使用量の増加

2. 予期せぬコスト発生の防止
   - 予算アラートの設定
   - 使用量制限の設定
   - 定期的なコスト見直し

3. スケーリングによる影響
   - ユーザー数増加時のコスト試算
   - リソース追加時のコスト見積もり 